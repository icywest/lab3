<h1>Blog Posts</h1>

    <div class="container">
      {{#each posts}}
        <article class="post-card">
          <h2>{{this.title}}</h2>
          <p class="post-content">{{this.content}}</p>
          <p class="post-author"><strong>Author:</strong> {{this.author}}</p>

          <div class="comments-container">
      <h3>Comments:</h3>
      {{#if this.comments.length}}
        {{#each this.comments}}
          <div class="comment">
            <p class="author"><strong>{{this.username}}:</strong></p>
            <p>{{this.content}}</p>

            {{#if (eq this.userId ../user.id)}}
              <form action="/comments/delete/{{this.id}}" method="POST">
                <button class="delete-btn" type="submit" onclick="return confirm('Are you sure you want to delete this comment?')">Delete</button>
              </form>
            {{/if}}
          </div>
        {{/each}}
      {{else}}
        <p class="no-comments">No comments yet.</p>
      {{/if}}
    </div>


      {{#if ../user}}
        <form class="comment-form" action="/comments/add" method="POST">
          <input type="hidden" name="postId" value="{{this.id}}">
          <textarea name="comment" required placeholder="Write a comment..."></textarea>
          <button type="submit" class="btn">Comment</button>
        </form>
      {{else}}
        <p class="login-message"><a href="/login">Log in</a> to comment</p>
      {{/if}}
    </article>
  {{else}}
    <p class="no-posts">No posts available.</p>
  {{/each}}
</div>
